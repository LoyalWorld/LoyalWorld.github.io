<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Rain</title>
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Prevent scroll bars */
            background: black; /* Background for the canvas */
        }
        #overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1.5); /* Start scaled up */
            background-color: rgba(0, 0, 0, 0.8); /* Semi-transparent background */
            color: white; /* Text color */
            padding: 20px;
            border-radius: 10px;
            font-family: Arial, sans-serif;
            font-size: 20px;
            z-index: 10; /* Ensure it is above the canvas */
            text-align: center; /* Center the text */
            opacity: 1; /* Fully visible */
            transition: transform 1s ease, opacity 1s ease; /* Smooth scale and fade */
        }
    </style>
</head>
<body>
    <canvas id="c"></canvas>
    <div id="overlay">Welcome, Zerkly<br>Your System Is Almost Full Loaded...</div>

    <script>
        var root = {
            wavecolor: {  
                r: 125,
                g: 52,
                b: 253
            },
            rainbowSpeed: 0.5,
            rainbow: true,
            matrixspeed: 50
        };

        var c = document.getElementById("c");
        var ctx = c.getContext("2d");

        // making the canvas full screen
        c.height = window.innerHeight;
        c.width = window.innerWidth;

        // the characters (binary and ZERKLY)
        var binary = "10";
        var specialWord = "ZERKLY".split("");  // Split ZERKLY into an array of characters
        var characters = binary.split("");
        var font_size = 14;
        var columns = c.width / font_size;  // number of columns for the rain
        var drops = [];

        // initialize drops array
        for (var x = 0; x < columns; x++)
            drops[x] = 1;

        // a map to keep track of columns where ZERKLY is being drawn
        var wordColumnMap = {};

        // drawing the characters
        function draw() {
            // translucent BG to show trail
            ctx.fillStyle = "rgba(0,0,0, 0.05)";
            ctx.fillRect(0, 0, c.width, c.height);

            ctx.font = font_size + "px arial";

            // loop over drops
            for (var i = 0; i < drops.length; i++) {
                ctx.fillStyle = "rgba(10,10,10, 1)";
                ctx.fillRect(i * font_size, drops[i] * font_size, font_size, font_size);
                
                var text;
                if (wordColumnMap[i] !== undefined) {
                    text = specialWord[wordColumnMap[i]];  // Get the specific letter of ZERKLY
                    wordColumnMap[i]++;

                    if (wordColumnMap[i] >= specialWord.length) {
                        delete wordColumnMap[i];
                    }
                    ctx.fillStyle = "red"; // ZERKLY characters in red
                } else {
                    var randomChoice = Math.random();
                    if (randomChoice > 0.95 && drops[i] + specialWord.length < c.height / font_size) {
                        wordColumnMap[i] = 0;
                        text = specialWord[0]; // Start with the first letter
                        ctx.fillStyle = "red"; // ZERKLY characters in red
                    } else {
                        text = characters[Math.floor(Math.random() * characters.length)];
                        ctx.fillStyle = 'rgba(0, 255, 0)'; // Set binary characters to solid green
                    }
                }

                // draw the text
                ctx.fillText(text, i * font_size, drops[i] * font_size);
                drops[i]++;
                if (drops[i] * font_size > c.height && Math.random() > 0.975)
                    drops[i] = 0;
            }
        }

        // Call draw at the specified interval
        setInterval(draw, root.matrixspeed);

        // Fade in with scaling effect
        const overlay = document.getElementById('overlay');
        overlay.style.transform = 'translate(-50%, -50%) scale(1.5)'; // Initial scale
        overlay.style.opacity = '1'; // Fully visible

        setTimeout(() => {
            overlay.style.transform = 'translate(-50%, -50%) scale(1)'; // Scale down
        }, 0); // Set scale to normal immediately

        // Fade out overlay after 3 seconds
        setTimeout(() => {
            overlay.style.opacity = '0'; // Start fading
            overlay.style.transform = 'translate(-50%, -50%) scale(1.5)'; // Scale back up when fading out
        }, 3000); // 3 seconds

        function livelyPropertyListener(name, val) {
            switch (name) {
                case "matrixColor":
                    root.wavecolor = hexToRgb(val);
                    break;
                case "rainBow":
                    root.rainbow = val;
                    break;
                case "rainbowSpeed":
                    root.rainbowSpeed = val / 100;
                    break;
            }
        }

        function hexToRgb(hex) {
            var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }
    </script>
</body>
</html>
